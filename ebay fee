<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional eBay Fees Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3665f3;
            --primary-dark: #2a4fc9;
            --primary-light: #e8edff;
            --secondary: #6c757d;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --light: #f8f9fa;
            --dark: #343a40;
            --border: #dee2e6;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --radius: 8px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--success));
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--primary);
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 2.5rem;
        }
        
        .subtitle {
            color: var(--secondary);
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .calculator-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 992px) {
            .calculator-container {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .card:hover {
            box-shadow: 0 6px 16px rgba(0,0,0,0.12);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }
        
        .card-header i {
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .input-with-icon {
            position: relative;
        }
        
        .input-with-icon i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--secondary);
        }
        
        input, select {
            width: 100%;
            padding: 14px 15px 14px 45px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .checkbox-group input {
            width: auto;
        }
        
        .btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(54, 101, 243, 0.3);
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            border-radius: var(--radius);
            background: var(--light);
            transition: var(--transition);
        }
        
        .result-item:hover {
            background: var(--primary-light);
        }
        
        .result-item.total {
            grid-column: 1 / -1;
            background: var(--primary-light);
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .profit {
            color: var(--success);
            font-weight: bold;
        }
        
        .fee {
            color: var(--danger);
        }
        
        .info-section {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }
        
        .info-section h2 {
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-section p {
            margin-bottom: 15px;
        }
        
        .info-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        .info-section li {
            margin-bottom: 8px;
        }
        
        .disclaimer {
            font-size: 0.9rem;
            color: var(--secondary);
            font-style: italic;
            margin-top: 20px;
            text-align: center;
            padding: 15px;
            background: var(--light);
            border-radius: var(--radius);
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            background: white;
            border-radius: var(--radius) var(--radius) 0 0;
            overflow: hidden;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            background: var(--primary-light);
        }
        
        .tab:hover:not(.active) {
            background: var(--light);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .summary-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
        }
        
        .summary-card:hover {
            transform: translateY(-5px);
        }
        
        .summary-card i {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .summary-card h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .summary-card .value {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .summary-card.profit .value {
            color: var(--success);
        }
        
        .summary-card.fees .value {
            color: var(--danger);
        }
        
        .summary-card.margin .value {
            color: var(--primary);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
        }
        
        .tooltip i {
            color: var(--secondary);
            font-size: 0.9rem;
        }
        
        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: var(--radius);
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .advanced-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            cursor: pointer;
            color: var(--primary);
            font-weight: 500;
        }
        
        .advanced-settings {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        
        .advanced-settings.active {
            display: block;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: var(--secondary);
            font-size: 0.9rem;
        }
        
        .history-section {
            margin-top: 30px;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .history-table th, .history-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        .history-table th {
            background: var(--light);
            font-weight: 600;
        }
        
        .history-table tr:hover {
            background: var(--primary-light);
        }
        
        @media (max-width: 768px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-calculator"></i>
            </div>
            <h1>Professional eBay Fees Calculator</h1>
            <p class="subtitle">Accurately calculate your eBay selling fees, payment processing costs, and profit margins</p>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-tab="calculator">
                <i class="fas fa-calculator"></i>
                Calculator
            </div>
            <div class="tab" data-tab="info">
                <i class="fas fa-info-circle"></i>
                Fee Information
            </div>
            <div class="tab" data-tab="history">
                <i class="fas fa-history"></i>
                Calculation History
            </div>
        </div>
        
        <div class="tab-content active" id="calculator-tab">
            <div class="calculator-container">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-edit"></i>
                        <h2 class="card-title">Item Details</h2>
                    </div>
                    
                    <div class="form-group">
                        <label for="itemPrice">
                            Item Sale Price ($)
                            <span class="tooltip">
                                <i class="fas fa-question-circle"></i>
                                <span class="tooltip-text">The final selling price of your item</span>
                            </span>
                        </label>
                        <div class="input-with-icon">
                            <i class="fas fa-tag"></i>
                            <input type="number" id="itemPrice" placeholder="0.00" min="0" step="0.01" value="100">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="shippingCost">Shipping Cost ($)</label>
                        <div class="input-with-icon">
                            <i class="fas fa-shipping-fast"></i>
                            <input type="number" id="shippingCost" placeholder="0.00" min="0" step="0.01" value="10">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="itemCost">Item Cost ($)</label>
                        <div class="input-with-icon">
                            <i class="fas fa-dollar-sign"></i>
                            <input type="number" id="itemCost" placeholder="0.00" min="0" step="0.01" value="30">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="category">Item Category</label>
                        <div class="input-with-icon">
                            <i class="fas fa-list"></i>
                            <select id="category">
                                <option value="standard">Most Categories (12.55%)</option>
                                <option value="electronics">Electronics (12.55% + $0.30)</option>
                                <option value="musical">Musical Instruments & Gear (12.55%)</option>
                                <option value="collectibles">Collectibles (12.55%)</option>
                                <option value="home">Home & Garden (12.55%)</option>
                                <option value="fashion">Fashion (12.55%)</option>
                                <option value="motors">eBay Motors (Up to $100)</option>
                                <option value="business">Business & Industrial (12.55%)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="shippingPaid">Who Pays Shipping?</label>
                        <div class="input-with-icon">
                            <i class="fas fa-truck"></i>
                            <select id="shippingPaid">
                                <option value="buyer">Buyer Pays</option>
                                <option value="seller">Seller Pays</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="internationalSale">
                        <label for="internationalSale">International Sale</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="promotedListing">
                        <label for="promotedListing">Promoted Listing</label>
                    </div>
                    
                    <div class="form-group" id="promotedRateContainer" style="display: none;">
                        <label for="promotedRate">Promoted Listing Rate (%)</label>
                        <div class="input-with-icon">
                            <i class="fas fa-bullhorn"></i>
                            <input type="number" id="promotedRate" placeholder="5" min="0" step="0.1" value="5">
                        </div>
                    </div>
                    
                    <div class="advanced-toggle" id="advancedToggle">
                        <i class="fas fa-cog"></i>
                        <span>Advanced Settings</span>
                    </div>
                    
                    <div class="advanced-settings" id="advancedSettings">
                        <div class="form-group">
                            <label for="storeSubscription">Store Subscription</label>
                            <div class="input-with-icon">
                                <i class="fas fa-store"></i>
                                <select id="storeSubscription">
                                    <option value="none">No Store</option>
                                    <option value="basic">Basic Store</option>
                                    <option value="premium">Premium Store</option>
                                    <option value="anchor">Anchor Store</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="listingType">Listing Type</label>
                            <div class="input-with-icon">
                                <i class="fas fa-clipboard-list"></i>
                                <select id="listingType">
                                    <option value="auction">Auction</option>
                                    <option value="fixed">Fixed Price</option>
                                    <option value="offer">Best Offer</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn" id="calculateBtn">
                        <i class="fas fa-calculator"></i>
                        Calculate Fees
                    </button>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-chart-pie"></i>
                        <h2 class="card-title">Fee Breakdown</h2>
                    </div>
                    
                    <div class="summary-cards">
                        <div class="summary-card profit">
                            <i class="fas fa-money-bill-wave"></i>
                            <h3>Net Profit</h3>
                            <div class="value" id="summaryProfit">$0.00</div>
                        </div>
                        
                        <div class="summary-card fees">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <h3>Total Fees</h3>
                            <div class="value" id="summaryFees">$0.00</div>
                        </div>
                        
                        <div class="summary-card margin">
                            <i class="fas fa-percentage"></i>
                            <h3>Profit Margin</h3>
                            <div class="value" id="summaryMargin">0%</div>
                        </div>
                    </div>
                    
                    <div class="results-grid">
                        <div class="result-item">
                            <span>Item Sale Price:</span>
                            <span id="resultSalePrice">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span>Shipping Cost:</span>
                            <span id="resultShipping">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span>Item Cost:</span>
                            <span id="resultItemCost">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span>eBay Final Value Fee:</span>
                            <span class="fee" id="resultEBayFee">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span>Payment Processing Fee:</span>
                            <span class="fee" id="resultPaymentFee">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span>Promoted Listing Fee:</span>
                            <span class="fee" id="resultPromotedFee">$0.00</span>
                        </div>
                        <div class="result-item">
                            <span>International Fee:</span>
                            <span class="fee" id="resultInternationalFee">$0.00</span>
                        </div>
                        <div class="result-item total">
                            <span>Total Fees:</span>
                            <span class="fee" id="resultTotalFees">$0.00</span>
                        </div>
                        <div class="result-item total">
                            <span>Net Profit:</span>
                            <span class="profit" id="resultNetProfit">$0.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="info-tab">
            <div class="info-section">
                <h2><i class="fas fa-info-circle"></i> About eBay Fees</h2>
                <p>When you sell on eBay, you're charged several types of fees. Understanding these fees is crucial for pricing your items correctly and maximizing your profits.</p>
                
                <h3><i class="fas fa-receipt"></i> Insertion Fees</h3>
                <p>You get a certain number of free listings per month. Beyond that, you'll pay $0.35 per listing in most categories. Store subscribers receive more free listings.</p>
                
                <h3><i class="fas fa-percentage"></i> Final Value Fees</h3>
                <p>This is a percentage of the total sale price, including shipping. For most categories, the final value fee is 12.55% of the total sale amount plus $0.30.</p>
                
                <h3><i class="fas fa-credit-card"></i> Payment Processing Fees</h3>
                <p>eBay manages payments through their managed payments system, which charges 2.9% of the sale price plus $0.30 per order.</p>
                
                <h3><i class="fas fa-plus-circle"></i> Additional Fees</h3>
                <ul>
                    <li>Promoted Listing fees (if you choose to promote your listing)</li>
                    <li>International fees (for sales outside your country)</li>
                    <li>Optional listing upgrade fees</li>
                    <li>Store subscription fees (monthly)</li>
                </ul>
                
                <p class="disclaimer">Note: This calculator provides estimates only. Actual fees may vary based on your eBay account type, seller status, and current fee structures. Always check eBay's official fee schedule for the most accurate information.</p>
            </div>
        </div>
        
        <div class="tab-content" id="history-tab">
            <div class="info-section">
                <h2><i class="fas fa-history"></i> Calculation History</h2>
                <p>Your recent fee calculations will appear here. This feature helps you track different selling scenarios.</p>
                
                <div class="history-section">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Item Price</th>
                                <th>Fees</th>
                                <th>Profit</th>
                                <th>Margin</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <!-- History rows will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <button class="btn" id="clearHistory" style="margin-top: 20px; width: auto;">
                    <i class="fas fa-trash"></i>
                    Clear History
                </button>
            </div>
        </div>
        
        <footer>
            <p>eBay Fees Calculator &copy; 2023 | This tool is for estimation purposes only</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
            
            // Show/hide promoted listing rate input
            const promotedListingCheckbox = document.getElementById('promotedListing');
            const promotedRateContainer = document.getElementById('promotedRateContainer');
            
            promotedListingCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    promotedRateContainer.style.display = 'block';
                } else {
                    promotedRateContainer.style.display = 'none';
                }
            });
            
            // Advanced settings toggle
            const advancedToggle = document.getElementById('advancedToggle');
            const advancedSettings = document.getElementById('advancedSettings');
            
            advancedToggle.addEventListener('click', function() {
                advancedSettings.classList.toggle('active');
                
                const icon = this.querySelector('i');
                if (advancedSettings.classList.contains('active')) {
                    icon.className = 'fas fa-chevron-up';
                } else {
                    icon.className = 'fas fa-cog';
                }
            });
            
            // Calculate fees when button is clicked
            const calculateBtn = document.getElementById('calculateBtn');
            
            calculateBtn.addEventListener('click', function() {
                calculateFees();
                addToHistory();
            });
            
            // Also calculate when any input changes
            const inputs = document.querySelectorAll('input, select');
            inputs.forEach(input => {
                input.addEventListener('change', function() {
                    calculateFees();
                });
            });
            
            // Clear history button
            const clearHistoryBtn = document.getElementById('clearHistory');
            clearHistoryBtn.addEventListener('click', function() {
                localStorage.removeItem('feeCalculationHistory');
                updateHistoryTable();
            });
            
            // Initial calculation
            calculateFees();
            updateHistoryTable();
            
            function calculateFees() {
                // Get input values
                const itemPrice = parseFloat(document.getElementById('itemPrice').value) || 0;
                const shippingCost = parseFloat(document.getElementById('shippingCost').value) || 0;
                const itemCost = parseFloat(document.getElementById('itemCost').value) || 0;
                const category = document.getElementById('category').value;
                const shippingPaid = document.getElementById('shippingPaid').value;
                const isInternational = document.getElementById('internationalSale').checked;
                const isPromoted = document.getElementById('promotedListing').checked;
                const promotedRate = parseFloat(document.getElementById('promotedRate').value) || 0;
                const storeSubscription = document.getElementById('storeSubscription').value;
                const listingType = document.getElementById('listingType').value;
                
                // Calculate fees based on category
                let ebayFee = 0;
                let paymentFee = 0;
                let promotedFee = 0;
                let internationalFee = 0;
                
                // Apply store subscription discount
                let storeDiscount = 0;
                switch(storeSubscription) {
                    case 'basic':
                        storeDiscount = 0.05; // 5% discount on final value fees
                        break;
                    case 'premium':
                        storeDiscount = 0.1; // 10% discount
                        break;
                    case 'anchor':
                        storeDiscount = 0.15; // 15% discount
                        break;
                }
                
                // eBay Final Value Fee
                switch(category) {
                    case 'standard':
                    case 'musical':
                    case 'collectibles':
                    case 'home':
                    case 'fashion':
                    case 'business':
                        ebayFee = (itemPrice + (shippingPaid === 'buyer' ? shippingCost : 0)) * 0.1255;
                        break;
                    case 'electronics':
                        ebayFee = (itemPrice + (shippingPaid === 'buyer' ? shippingCost : 0)) * 0.1255 + 0.30;
                        break;
                    case 'motors':
                        ebayFee = Math.min((itemPrice + (shippingPaid === 'buyer' ? shippingCost : 0)) * 0.015, 100);
                        break;
                }
                
                // Apply store discount
                ebayFee = ebayFee * (1 - storeDiscount);
                
                // Payment Processing Fee (assuming managed payments)
                paymentFee = (itemPrice + (shippingPaid === 'buyer' ? shippingCost : 0)) * 0.029 + 0.30;
                
                // Promoted Listing Fee
                if (isPromoted) {
                    promotedFee = itemPrice * (promotedRate / 100);
                }
                
                // International Fee
                if (isInternational) {
                    internationalFee = (itemPrice + (shippingPaid === 'buyer' ? shippingCost : 0)) * 0.015;
                }
                
                // Calculate totals
                const totalFees = ebayFee + paymentFee + promotedFee + internationalFee;
                const shippingCostToSeller = shippingPaid === 'seller' ? shippingCost : 0;
                const netProfit = itemPrice - itemCost - shippingCostToSeller - totalFees;
                const profitMargin = itemPrice > 0 ? (netProfit / itemPrice) * 100 : 0;
                
                // Update results
                document.getElementById('resultSalePrice').textContent = `$${itemPrice.toFixed(2)}`;
                document.getElementById('resultShipping').textContent = `$${shippingCost.toFixed(2)}`;
                document.getElementById('resultItemCost').textContent = `$${itemCost.toFixed(2)}`;
                document.getElementById('resultEBayFee').textContent = `$${ebayFee.toFixed(2)}`;
                document.getElementById('resultPaymentFee').textContent = `$${paymentFee.toFixed(2)}`;
                document.getElementById('resultPromotedFee').textContent = `$${promotedFee.toFixed(2)}`;
                document.getElementById('resultInternationalFee').textContent = `$${internationalFee.toFixed(2)}`;
                document.getElementById('resultTotalFees').textContent = `$${totalFees.toFixed(2)}`;
                document.getElementById('resultNetProfit').textContent = `$${netProfit.toFixed(2)}`;
                
                // Update summary cards
                document.getElementById('summaryProfit').textContent = `$${netProfit.toFixed(2)}`;
                document.getElementById('summaryFees').textContent = `$${totalFees.toFixed(2)}`;
                document.getElementById('summaryMargin').textContent = `${profitMargin.toFixed(2)}%`;
                
                // Color code profit
                const profitElement = document.getElementById('resultNetProfit');
                const summaryProfit = document.getElementById('summaryProfit');
                
                if (netProfit < 0) {
                    profitElement.style.color = 'var(--danger)';
                    summaryProfit.style.color = 'var(--danger)';
                } else {
                    profitElement.style.color = 'var(--success)';
                    summaryProfit.style.color = 'var(--success)';
                }
                
                return {
                    itemPrice,
                    shippingCost,
                    itemCost,
                    totalFees,
                    netProfit,
                    profitMargin,
                    timestamp: new Date().toISOString()
                };
            }
            
            function addToHistory() {
                const calculation = calculateFees();
                let history = JSON.parse(localStorage.getItem('feeCalculationHistory')) || [];
                
                // Add new calculation to history
                history.unshift(calculation);
                
                // Keep only last 10 calculations
                if (history.length > 10) {
                    history = history.slice(0, 10);
                }
                
                localStorage.setItem('feeCalculationHistory', JSON.stringify(history));
                updateHistoryTable();
            }
            
            function updateHistoryTable() {
                const history = JSON.parse(localStorage.getItem('feeCalculationHistory')) || [];
                const tableBody = document.getElementById('historyTableBody');
                
                tableBody.innerHTML = '';
                
                if (history.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">No calculation history yet</td></tr>';
                    return;
                }
                
                history.forEach(calc => {
                    const row = document.createElement('tr');
                    const date = new Date(calc.timestamp);
                    const formattedDate = `${date.getMonth()+1}/${date.getDate()} ${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;
                    
                    row.innerHTML = `
                        <td>${formattedDate}</td>
                        <td>$${calc.itemPrice.toFixed(2)}</td>
                        <td>$${calc.totalFees.toFixed(2)}</td>
                        <td style="color: ${calc.netProfit < 0 ? 'var(--danger)' : 'var(--success)'}">$${calc.netProfit.toFixed(2)}</td>
                        <td>${calc.profitMargin.toFixed(2)}%</td>
                    `;
                    
                    tableBody.appendChild(row);
                });
            }
        });
    </script>
</body>
</html>
